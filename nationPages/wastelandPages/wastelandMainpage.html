<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>The Wasteland - Mindbound</title>
    <link rel="stylesheet" href="../nation.css" type="text/css">
     <link rel="icon" type="image/x-icon" href="../../img/favi.png">
</head>
<body>
    <main>
        <header> 
            <ul class="headerList">
                <li class="dropdown">
                    <a class="info" href="#">Info</a>
                    <ul class="dropdownMenu">
                        <li><a href="../../index.html">Home</a></li>
                        <li><a href="../nations.html">Nations</a></li>
                        <li><a href="../../webpages/allCharacters.html">Characters</a></li>
                    </ul>
                </li>
              <li class="searchBar">
                    <input type="text" id="searchInput" placeholder="Search..." />
                    <ul id="suggestions" class="suggestions"></ul>
                </li>
                <li><a class="aboutUs" href="../../webpages/aboutUs.html">About Us</a></li>  
            </ul>
        </header>

        <h1 class="mainTitleWhite">Mindbound</h1>
        
        <img src="wastelandImg/wastelandHeader.png" alt="headerImage" class="headerImg">

        <div class="middleBlock">

            <a href="javascript:history.back()" class="backButton">&lt;Back</a>
            
            <h2 class="secondTitle">The Wasteland</h2>

            <p class="nationText">
              The wasteland is as its name suggests a large wasteland, just the remains of a once great nation, 
              destroyed by a nuclear fallout. However, some people managed to survive as it appeared that a portion of the 
              people had a gene that made them immune to the dangerous infection of radioactive waste, these people formed their own 
              tribes. They still remain in the nation, not being allowed to leave as surrounding nations decided it would be unsafe to 
              risk the radiation being able to escape. A wall was placed surrounding the nation, only letting people through at specific 
              guarded gates.
            </p>

            <h2 class="thirdTitle">Cast</h2>

            <div class="middleBlockLowerContent">

              <!-- Aver -->
              <a href="./castPages/avery.html" class="castCoverOne">
                  <img src="wastelandImg/castImg/averyImg/headshotAvery.png" alt="averyHeadshot">
              </a>

              <a class="castTextOne" href="./castPages/avery.html">
                  <p>Avery (WIP)</p>
              </a>

              <!-- HPeep3 -->
              <a href="./castPages/jBoy.html" class="castCoverTwo">
                  <img src="wastelandImg/placeholder.png" alt="jBoyCover">
              </a>

              <a class="castTextTwo" href="./castPages/jBoy.html">
                  <p>J-Boy (WIP)</p>
              </a>

              <!-- Noah -->
              <a href="./castPages/noah.html" class="castCoverThree">
                  <img src="wastelandImg/placeholder.png" alt="noahCover">
              </a>

              <a class="castTextThree" href="./castPages/noah.html">
                  <p>Noah (WIP)</p>
              </a>

              <!-- HPeep4 -->
              <a href="./castPages/lpeep4.html" class="castCoverFour">
                  <img src="wastelandImg/placeholder.png" alt="lpeep4Cover">
              </a>

              <a class="castTextFour" href="./castPages/lpeep4.html">
                  <p>?</p>
              </a>
            </div>

            <h2 class="divinityTitle">Divinity</h2>

            <div class="middleBlockOneDivinity">

              <!-- Azathoth -->
              <a href="./divinityPages/azathoth.html" class="divinityOneCover">
                  <img src="wastelandImg/placeholder.png" alt="azathothCover">
              </a>

              <a class="divinityOneText" href="./divinityPages/azathoth.html">
                  <p>Azathoth (WIP)</p>
              </a>
            </div>

             <h2 class="mentionsTitle">Honorable Mentions</h2>

             <div class="mentions">
                <p class="mention">To</p>
                <p class="mention">be</p>
                <p class="mention">added</p>

                <!-- <div class="mention">To Be Added
                    <div class="mentionInfo">
                        <h4>To Be Added</h4>
                        
                        <hr style="border: 0; border-top: 0.1rem solid white; width: 80%; margin: 0rem auto;">

                        <p>(WIP)</p>
                    </div>
                </div>  -->
             </div>

        </div>

        <footer>
            <div class="footerContainer">
                <div class="footerText">
                    <a href="https://discord.gg/Aw5rpJ3DN6" target="_blank" rel="noopener noreferrer">
                        <img src="../../img/dcLogo.png" alt="discordLogo" class="dcLogo">
                    </a>
                </div>
                <img src="wastelandImg/wastelandFooter.png" alt="footerImage" class="footerImg">
            </div>
        </footer>
    </main>

<script src="../../functions/searchMap.js"></script>

<script>
// ====================
// Scroll hide header
// ====================
const header = document.querySelector("header");
if (header) 
{
  let lastScrollY = window.scrollY;
  window.addEventListener("scroll", () => 
  {
    if (window.scrollY > lastScrollY) 
    {
      header.classList.add("hidden");
    } 
    
    else 
    {
      header.classList.remove("hidden");
    }
    lastScrollY = window.scrollY;
  });
}

// ====================
// Dropdown menu
// ====================
document.querySelectorAll('.dropdown > a').forEach(link => 
{
  link.addEventListener('click', e => 
  {
    e.preventDefault();
    const menu = link.nextElementSibling;
    if (menu) menu.classList.toggle('open');
  });
});

document.addEventListener('click', e => 
{
  document.querySelectorAll('.dropdownMenu.open').forEach(menu => 
  {
    if (!menu.parentElement.contains(e.target)) 
    {
      menu.classList.remove('open');
    }
  });
});

// ====================
// Search input
// ====================
searchInput.addEventListener("keydown", function(e) 
{
  if (e.key === "Enter") 
  {
    e.preventDefault();
    const query = this.value.toLowerCase().trim();

    if (searchMap[query]) 
    {
      window.location.href = searchMap[query];
    } 
    
    else 
    {
      alert("No results found for: " + query);
    }
  }
});

// ====================
// Search suggestions
// ====================

const input = document.getElementById('searchInput');
const suggestions = document.getElementById('suggestions');

input.addEventListener('input', () => 
{
    const value = input.value.toLowerCase();
    suggestions.innerHTML = '';
    if (value) 
    {
        const filtered = Object.keys(searchMap).filter(name => name.startsWith(value));
        filtered.forEach(name => 
        {
            const li = document.createElement('li');
            li.textContent = name;
            li.addEventListener('click', () => {
                window.location.href = searchMap[name];
            });
            suggestions.appendChild(li);
        });
    }
});

// ====================
// Box stays when clicked
// ====================

document.querySelectorAll('.mention').forEach(mention => {
  const info = mention.querySelector('.mentionInfo');

  function checkFlip() {
    if (!info.classList.contains('flipped')) {
      info.style.visibility = 'visible';
      const rect = info.getBoundingClientRect();
      const parentRect = mention.getBoundingClientRect(); 
     
      if (rect.right > window.innerWidth - 10) {
        info.classList.add('flipped');
      }

      if (!info.classList.contains('active')) {
        info.style.visibility = '';
      }
    }
  }

  // HOVER
  mention.addEventListener('mouseenter', () => {
    checkFlip();
  });

  // CLICK
  mention.addEventListener('click', e => {
    e.stopPropagation();

    // Close other active boxes
    document.querySelectorAll('.mentionInfo.active').forEach(openInfo => {
      if (openInfo !== info) openInfo.classList.remove('active');
    });

    if (info.classList.contains('active')) {
      info.classList.remove('active');
    } else {
      info.classList.add('active');
      checkFlip();
    }
  });
});

// Close everything else
document.addEventListener('click', () => {
  document.querySelectorAll('.mentionInfo.active').forEach(info => {
    info.classList.remove('active');
  });
});
</script>
</body>
</html>