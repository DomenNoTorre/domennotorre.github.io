<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Zloyvor - Mindbound</title>
    <link rel="stylesheet" href="../nation.css" type="text/css">
     <link rel="icon" type="image/x-icon" href="../../img/favi.png">
</head>
<body>
    <main>
        <header> 
            <ul class="headerList">
                <li class="dropdown">
                    <a class="info" href="#">Info</a>
                    <ul class="dropdownMenu">
                        <li><a href="../../index.html">Home</a></li>
                        <li><a href="../nations.html">Nations</a></li>
                    </ul>
                </li>
              <li class="searchBar">
                    <input type="text" id="searchInput" placeholder="Search..." />
                    <ul id="suggestions" class="suggestions"></ul>
                </li>
                <li><a class="aboutUs" href="../../webpages/aboutUs.html">About Us</a></li>  
            </ul>
        </header>

        <h1 class="mainTitleWhite">Mindbound</h1>
        
        <img src="zloyvorImg/zloyvorHeader.png" alt="headerImage" class="headerImg">

        <div class="middleBlock">

            <a href="javascript:history.back()" class="backButton">&lt;Back</a>
            
            <h2 class="secondTitle">Zloyvor</h2>

            <p class="nationText"> Not much is known about Zloyvor in the other nations. 
              Its inhabitants have been seen wearing dark cloths over their eyes, but other than that, 
              the nations are none the wiser about what lies beyond the towering border walls. One of the things which is not publicly known, 
              is the horrors that take over the nation once a year. Every October, Zloyvorians board up their windows, doors, anything that 
              could be an entrance for the horrific creatures that roam the streets. They'll be forced to stay inside for weeks until the 
              hunters have finally taken care of the monsters.

            </p>

            <h2 class="thirdTitle">Cast</h2>

            <div class="middleBlockLowerContent">

              <!-- Anastasia -->
              <a href="./castPages/anastasia.html" class="castCoverOne">
                  <img src="zloyvorImg/anastasia.png" alt="anastasiaCover">
              </a>

              <a class="castTextOne" href="./castPages/anastasia.html">
                  <p>Anastasia</p>
              </a>

              <!-- Daniel -->
              <a href="./castPages/daniel.html" class="castCoverTwo">
                  <img src="zloyvorImg/placeholder.png" alt="danielCover">
              </a>

              <a class="castTextTwo" href="./castPages/daniel.html">
                  <p>Daniel (WIP)</p>
              </a>

              <!-- Irina -->
              <a href="./castPages/irina.html" class="castCoverThree">
                  <img src="zloyvorImg/placeholder.png" alt="irinaCover">
              </a>

              <a class="castTextThree" href="./castPages/irina.html">
                  <p>Irina (WIP)</p>
              </a>

              <!-- Mnemos -->
              <a href="./castPages/mnemos.html" class="castCoverFour">
                  <img src="zloyvorImg/placeholder.png" alt="mnemosCover">
              </a>

              <a class="castTextFour" href="./castPages/mnemos.html">
                  <p>Mnemos</p>
              </a>
          </div>

          <h2 class="divinityTitle">Divinity</h2>

            <div class="middleBlockTwoDivinity">

              <!-- Nyakhtohu -->
              <a href="./castPages/nyakhtohu.html" class="divinityOneCover">
                  <img src="zloyvorImg/placeholder.png" alt="nyakhtohuCover">
              </a>

              <a class="divinityOneText" href="./castPages/nyakhtohu.html">
                  <p>Nyakhtohu (WIP)</p>
              </a>

              <!-- Zharosol -->
              <a href="./castPages/zharosol.html" class="divinityTwoCover">
                  <img src="zloyvorImg/placeholder.png" alt="zharosolCover">
              </a>

              <a class="divinityTwoText" href="./castPages/zharosol.html">
                  <p>Zharosol (WIP)</p>
              </a>
            </div>

             <h2 class="mentionsTitle">Honorable Mentions</h2>

             <div class="mentions">
                <div class="mention">The Ruka
                    <div class="mentionInfo">
                        <h4>The Ruka</h4>
                        
                        <hr style="border: 0; border-top: 0.1rem solid white; width: 80%; margin: 0rem auto;">

                        <p>(WIP)</p>
                    </div>
                </div> 
             </div>

        </div>

        <footer>
            <div class="footerContainer">
                <div class="footerText">
                    <a href="https://discord.gg/Aw5rpJ3DN6" target="_blank" rel="noopener noreferrer">
                        <img src="../../img/dcLogo.png" alt="discordLogo" class="dcLogo">
                    </a>
                </div>
                <img src="zloyvorImg/zloyvorFooter.png" alt="footerImage" class="footerImg">
            </div>
        </footer>
    </main>

<script src="../../functions/searchMap.js"></script>

<script>
// ====================
// Scroll hide header
// ====================
const header = document.querySelector("header");
if (header) 
{
  let lastScrollY = window.scrollY;
  window.addEventListener("scroll", () => 
  {
    if (window.scrollY > lastScrollY) 
    {
      header.classList.add("hidden");
    } 
    
    else 
    {
      header.classList.remove("hidden");
    }
    lastScrollY = window.scrollY;
  });
}

// ====================
// Dropdown menu
// ====================
document.querySelectorAll('.dropdown > a').forEach(link => 
{
  link.addEventListener('click', e => 
  {
    e.preventDefault();
    const menu = link.nextElementSibling;
    if (menu) menu.classList.toggle('open');
  });
});

document.addEventListener('click', e => 
{
  document.querySelectorAll('.dropdownMenu.open').forEach(menu => 
  {
    if (!menu.parentElement.contains(e.target)) 
    {
      menu.classList.remove('open');
    }
  });
});

// ====================
// Search input
// ====================
searchInput.addEventListener("keydown", function(e) 
{
  if (e.key === "Enter") 
  {
    e.preventDefault();
    const query = this.value.toLowerCase().trim();

    if (searchMap[query]) 
    {
      window.location.href = searchMap[query];
    } 
    
    else 
    {
      alert("No results found for: " + query);
    }
  }
});

// ====================
// Search suggestions
// ====================

const input = document.getElementById('searchInput');
const suggestions = document.getElementById('suggestions');

input.addEventListener('input', () => 
{
    const value = input.value.toLowerCase();
    suggestions.innerHTML = '';
    if (value) 
    {
        const filtered = Object.keys(searchMap).filter(name => name.startsWith(value));
        filtered.forEach(name => 
        {
            const li = document.createElement('li');
            li.textContent = name;
            li.addEventListener('click', () => {
                window.location.href = searchMap[name];
            });
            suggestions.appendChild(li);
        });
    }
});

// ====================
// Box stays when clicked
// ====================

document.querySelectorAll('.mention').forEach(mention => {
  const info = mention.querySelector('.mentionInfo');

  function checkFlip() {
    if (!info.classList.contains('flipped')) {
      info.style.visibility = 'visible';
      const rect = info.getBoundingClientRect();
      const parentRect = mention.getBoundingClientRect(); 
     
      if (rect.right > window.innerWidth - 10) {
        info.classList.add('flipped');
      }

      if (!info.classList.contains('active')) {
        info.style.visibility = '';
      }
    }
  }

  // HOVER
  mention.addEventListener('mouseenter', () => {
    checkFlip();
  });

  // CLICK
  mention.addEventListener('click', e => {
    e.stopPropagation();

    // Close other active boxes
    document.querySelectorAll('.mentionInfo.active').forEach(openInfo => {
      if (openInfo !== info) openInfo.classList.remove('active');
    });

    if (info.classList.contains('active')) {
      info.classList.remove('active');
    } else {
      info.classList.add('active');
      checkFlip();
    }
  });
});

// Close everything else
document.addEventListener('click', () => {
  document.querySelectorAll('.mentionInfo.active').forEach(info => {
    info.classList.remove('active');
  });
});
</script>
</body>
</html>