<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sothleigh - Mindbound</title>
    <link rel="stylesheet" href="../nation.css" type="text/css">
     <link rel="icon" type="image/x-icon" href="../../img/favi.png">
</head>
<body>
    <main>
        <header> 
            <ul class="headerList">
                <li class="dropdown">
                    <a class="info" href="#">Info</a>
                    <ul class="dropdownMenu">
                        <li><a href="../../index.html">Home</a></li>
                        <li><a href="../nations.html">Nations</a></li>
                    </ul>
                </li>
              <li class="searchBar">
                    <input type="text" id="searchInput" placeholder="Search..." />
                    <ul id="suggestions" class="suggestions"></ul>
                </li>
                <li><a class="aboutUs" href="../../webpages/aboutUs.html">About Us</a></li>  
            </ul>
        </header>

        <h1 class="mainTitleWhite">Mindbound</h1>
        
        <img src="sothleighImg/sothleighHeader.png" alt="headerImage" class="headerImg">

        <div class="middleBlock">

            <a href="javascript:history.back()" class="backButton">&lt;Back</a>
            
            <h2 class="secondTitle">Sothleigh</h2>

            <p class="nationText">
              Ah Sothleigh, THE place to be when you want to get successful in your pathetic, lazy lives. 
              Our factories accept anyone that's looking for something to do in their life, and worry not, we pay generously. 
              As for our lovely, hard working natives, put your endless energy to use and work overtime! All our workers will become 
              pillars holding up our incredible economy, if that's not a title worth boasting about, I don't know what is! 
              So what are you waiting for? Come on down to Sothleigh and show us your dedication and perseverance!
            </p>

            <h2 class="thirdTitle">Cast</h2>

            <div class="middleBlockLowerContent">

              <!-- Amphon -->
              <a href="./castPages/amphon.html" class="castCoverOne">
                  <img src="sothleighImg/placeholder.png" alt="amphonCover">
              </a>

              <a class="castTextOne" href="./castPages/amphon.html">
                  <p>Amphon</p>
              </a>

              <!-- Graham -->
              <a href="./castPages/?.html" class="castCoverTwo">
                  <img src="sothleighImg/placeholder.png" alt="?Cover">
              </a>

              <a class="castTextTwo" href="./castPages/?.html">
                  <p>Graham (WIP)</p>
              </a>

              <!-- Joseph -->
              <a href="./castPages/joseph.html" class="castCoverThree">
                  <img src="sothleighImg/placeholder.png" alt="josephCover">
              </a>

              <a class="castTextThree" href="./castPages/joseph.html">
                  <p>Joseph</p>
              </a>

              <!-- Mycroft -->
              <a href="./castPages/mycroft.html" class="castCoverFour">
                  <img src="sothleighImg/placeholder.png" alt="mycroftCover">
              </a>

              <a class="castTextFour" href="./castPages/mycroft.html">
                  <p>Mycroft (WIP)</p>
              </a>              
            </div>

            <h2 class="divinityTitle">Divinity</h2>

            <div class="middleBlockOneDivinity">

              <!-- Ealdwyrhta -->
              <a href="./castPages/ealdwyrhta.html" class="divinityOneCover">
                  <img src="sothleighImg/placeholder.png" alt="ealdwyrhtaCover">
              </a>

              <a class="divinityOneText" href="./castPages/ealdwyrhta.html">
                  <p>Ealdwyrhta (WIP)</p>
              </a>
            </div>

             <h2 class="mentionsTitle">Honorable Mentions</h2>

             <div class="mentions">
                <p class="mention">To</p>
                <p class="mention">be</p>
                <p class="mention">added</p>

                <!-- <div class="mention">To Be Added
                    <div class="mentionInfo">
                        <h4>To Be Added</h4>
                        
                        <hr style="border: 0; border-top: 0.1rem solid white; width: 80%; margin: 0rem auto;">

                        <p>(WIP)</p>
                    </div>
                </div>  -->
             </div>

        </div>

        <footer>
            <div class="footerContainer">
                <div class="footerText">
                    <a href="https://discord.gg/Aw5rpJ3DN6" target="_blank" rel="noopener noreferrer">
                        <img src="../../img/dcLogo.png" alt="discordLogo" class="dcLogo">
                    </a>
                </div>
                <img src="sothleighImg/sothleighFooter.png" alt="footerImage" class="footerImg">
            </div>
        </footer>
    </main>

<script src="../../functions/searchMap.js"></script>

<script>
// ====================
// Scroll hide header
// ====================
const header = document.querySelector("header");
if (header) 
{
  let lastScrollY = window.scrollY;
  window.addEventListener("scroll", () => 
  {
    if (window.scrollY > lastScrollY) 
    {
      header.classList.add("hidden");
    } 
    
    else 
    {
      header.classList.remove("hidden");
    }
    lastScrollY = window.scrollY;
  });
}

// ====================
// Dropdown menu
// ====================
document.querySelectorAll('.dropdown > a').forEach(link => 
{
  link.addEventListener('click', e => 
  {
    e.preventDefault();
    const menu = link.nextElementSibling;
    if (menu) menu.classList.toggle('open');
  });
});

document.addEventListener('click', e => 
{
  document.querySelectorAll('.dropdownMenu.open').forEach(menu => 
  {
    if (!menu.parentElement.contains(e.target)) 
    {
      menu.classList.remove('open');
    }
  });
});

// ====================
// Search input
// ====================
searchInput.addEventListener("keydown", function(e) 
{
  if (e.key === "Enter") 
  {
    e.preventDefault();
    const query = this.value.toLowerCase().trim();

    if (searchMap[query]) 
    {
      window.location.href = searchMap[query];
    } 
    
    else 
    {
      alert("No results found for: " + query);
    }
  }
});

// ====================
// Search suggestions
// ====================

const input = document.getElementById('searchInput');
const suggestions = document.getElementById('suggestions');

input.addEventListener('input', () => 
{
    const value = input.value.toLowerCase();
    suggestions.innerHTML = '';
    if (value) 
    {
        const filtered = Object.keys(searchMap).filter(name => name.startsWith(value));
        filtered.forEach(name => 
        {
            const li = document.createElement('li');
            li.textContent = name;
            li.addEventListener('click', () => {
                window.location.href = searchMap[name];
            });
            suggestions.appendChild(li);
        });
    }
});

// ====================
// Box stays when clicked
// ====================

document.querySelectorAll('.mention').forEach(mention => {
  const info = mention.querySelector('.mentionInfo');

  function checkFlip() {
    if (!info.classList.contains('flipped')) {
      info.style.visibility = 'visible';
      const rect = info.getBoundingClientRect();
      const parentRect = mention.getBoundingClientRect(); 
     
      if (rect.right > window.innerWidth - 10) {
        info.classList.add('flipped');
      }

      if (!info.classList.contains('active')) {
        info.style.visibility = '';
      }
    }
  }

  // HOVER
  mention.addEventListener('mouseenter', () => {
    checkFlip();
  });

  // CLICK
  mention.addEventListener('click', e => {
    e.stopPropagation();

    // Close other active boxes
    document.querySelectorAll('.mentionInfo.active').forEach(openInfo => {
      if (openInfo !== info) openInfo.classList.remove('active');
    });

    if (info.classList.contains('active')) {
      info.classList.remove('active');
    } else {
      info.classList.add('active');
      checkFlip();
    }
  });
});

// Close everything else
document.addEventListener('click', () => {
  document.querySelectorAll('.mentionInfo.active').forEach(info => {
    info.classList.remove('active');
  });
});
</script>
</body>
</html>